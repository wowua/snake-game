parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"qOtT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.objects=void 0;var e={SNAKE:"SNAKE",BOARD:"BOARD",APPLE:"APPLE",SCORES:"SCORES"};exports.objects=e;
},{}],"A7lJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.state=exports.initialState=void 0;var t,e=require("../objects");function r(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,o)}return r}function o(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?r(Object(o),!0).forEach(function(e){a(t,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))})}return t}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function s(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),t}function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var c=(a(t={},e.objects.SNAKE,{head:{col:8,row:6},position:[{col:8,row:6},{col:8,row:7},{col:8,row:8}]}),a(t,e.objects.BOARD,{size:15,edgeCell:1,cell:{size:36,spacing:6}}),a(t,e.objects.APPLE,{position:{col:3,row:3}}),a(t,e.objects.SCORES,{scores:0,lives:3}),t);exports.initialState=c;var l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,t),this.originalState=o({},e),this.state=e}return s(t,[{key:"setState",value:function(t,e){this.state[t]=o(o({},this.state[t]),e)}},{key:"getState",value:function(t){if(t&&!1===this.state.hasOwnProperty(t))throw new Error("you are trying to get property ".concat(t," which is not set in the state"));return t?this.state[t]:this}},{key:"resetState",value:function(t){if(t&&!1===this.state.hasOwnProperty(t))throw new Error("you are trying to reset property ".concat(t," which is not set in the state"));this.state[t]=this.originalState[t]}}]),t}(),u=new l(c);exports.state=u;
},{"../objects":"qOtT"}],"JW5X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Cell=exports.types=void 0;var t=require("../core/state"),e=require("./index");function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function n(t,e,i){return e&&s(t.prototype,e),i&&s(t,i),t}var r={DEFAULT:"DEFAULT",SNAKE:"SNAKE",APPLE:"APPLE"};exports.types=r;var o=function(){function s(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{col:0,row:0},c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.DEFAULT;i(this,s),this.ctx=n,this.size=t.state.getState(e.objects.BOARD).cell.size,this.spacing=t.state.getState(e.objects.BOARD).cell.spacing,this.position={col:o.col,row:o.row},this.type=r[c]}return n(s,[{key:"countPosition",value:function(){return{x:(this.size+this.spacing)*this.position.col,y:(this.size+this.spacing)*this.position.row}}},{key:"renderSnakeType",value:function(){var t=this.countPosition();this.ctx.beginPath(),this.ctx.lineWidth=1,this.ctx.fillStyle="#222f3e",this.ctx.rect(t.x,t.y,this.size,this.size),this.ctx.fill()}},{key:"renderDefaultType",value:function(){var t=this.countPosition();this.ctx.beginPath(),this.ctx.lineWidth=1,this.ctx.fillStyle="#fff",this.ctx.fillRect(t.x,t.y,this.size,this.size),this.ctx.strokeStyle="#222f3e",this.ctx.strokeRect(t.x,t.y,this.size,this.size)}},{key:"renderAppleType",value:function(){var t=this.countPosition();this.ctx.beginPath(),this.ctx.fillStyle="#10ac84",this.ctx.rect(t.x,t.y,this.size,this.size),this.ctx.fill()}},{key:"render",value:function(){switch(this.type){case r.SNAKE:return this.renderSnakeType();case r.APPLE:return this.renderAppleType();default:return this.renderDefaultType()}}}]),s}();exports.Cell=o;
},{"../core/state":"A7lJ","./index":"qOtT"}],"llI7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Board=void 0;var e=require("./cell"),r=require("./index");function t(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function n(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,r,t){return r&&n(e.prototype,r),t&&n(e,t),e}var a=function(){function n(e){t(this,n),this.ctx=e}return o(n,[{key:"render",value:function(t){for(var n=t.getState(r.objects.BOARD).size,o=1;o<=n;o++)for(var a=1;a<=n;a++){new e.Cell(this.ctx,{col:a,row:o}).render()}}}]),n}();exports.Board=a;
},{"./cell":"JW5X","./index":"qOtT"}],"oGFi":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.events=exports.emitter=exports.Emitter=void 0;var r=function(){function t(){e(this,t),this.events={}}return n(t,[{key:"on",value:function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)}},{key:"emit",value:function(e){this.events[e]&&this.events[e].forEach(function(e){e()})}}]),t}();exports.Emitter=r;var i=new r;exports.emitter=i;var o={SCORE:"SCORE",LOSE:"LOSE",RESTART:"RESTART",GAME_OVER:"GAME_OVER"};exports.events=o;
},{}],"sIOC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Snake=void 0;var e=require("./cell"),t=require("./index"),r=require("../core/emitter"),n=require("../core/state");function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}var c=function(){function i(e){var t=this;o(this,i),this.ctx=e,r.emitter.on(r.events.LOSE,function(){t.blinkTheHead(e)})}return a(i,[{key:"blinkTheHead",value:function(r){var o,i=n.state.getState(t.objects.SNAKE).head,a=new e.Cell(r,i,e.types.SNAKE),c=new e.Cell(r,i,e.types.DEFAULT),l=!0,u=0;o=setInterval(function(){void 0!==o&&3===u&&clearInterval(o),l?c.render():a.render(),l=!l,u++},100)}},{key:"render",value:function(r){var n=this;r.getState(t.objects.SNAKE).position.forEach(function(t){new e.Cell(n.ctx,{col:t.col,row:t.row},e.types.SNAKE).render()})}}]),i}();exports.Snake=c;
},{"./cell":"JW5X","./index":"qOtT","../core/emitter":"oGFi","../core/state":"A7lJ"}],"VcmC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Apple=void 0;var e=require("./cell"),r=require("./index");function t(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function n(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,r,t){return r&&n(e.prototype,r),t&&n(e,t),e}var i=function(){function n(e){t(this,n),this.ctx=e}return o(n,[{key:"render",value:function(t){var n=t.getState(r.objects.APPLE).position;new e.Cell(this.ctx,{col:n.col,row:n.row},e.types.APPLE).render()}}]),n}();exports.Apple=i;
},{"./cell":"JW5X","./index":"qOtT"}],"jUPX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Scores=void 0;var e=require("./index"),t=require("../core/emitter");function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function n(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}var i=function(){function s(e){var n=this;r(this,s),this.ctx=e,this.ctx.font="40px Share Tech Mono",this.color="#222f3e",this.showPressText=!1,this.showGameOverText=!1,t.emitter.on(t.events.LOSE,function(){n.showPressText=!0}),t.emitter.on(t.events.RESTART,function(){n.showPressText=!1}),t.emitter.on(t.events.GAME_OVER,function(){n.showPressText=!1,n.showGameOverText=!0})}return n(s,[{key:"renderScores",value:function(t,r,s){var n=t.getState(e.objects.SCORES).scores;this.ctx.fillText("SCORES: "+n,r,s)}},{key:"renderLives",value:function(t,r,s){var n=t.getState(e.objects.SCORES).lives;this.ctx.fillText("LIVES: "+n,r,s)}},{key:"renderRestartText",value:function(e,t){this.ctx.fillText("PRESS SPACE TO CONTINUE",e,t)}},{key:"renderGameOverText",value:function(e,t){this.ctx.fillText("GAME OVER",e,t)}},{key:"render",value:function(t){var r=t.getState(e.objects.BOARD),s=r.size,n=r.cell,i=(s+3)*(n.size+n.spacing);this.ctx.fillStyle=this.color,this.renderScores(t,i,100),this.renderLives(t,i,200),this.showPressText&&this.renderRestartText(i,400),this.showGameOverText&&this.renderGameOverText(i,400)}}]),s}();exports.Scores=i;
},{"./index":"qOtT","../core/emitter":"oGFi"}],"tK6r":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Canvas=void 0;var e=require("../objects/board"),t=require("../objects/snake"),n=require("../objects/apple"),r=require("../objects/scores");function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}var i=function(){function s(a){o(this,s),this.context=a.getContext("2d"),this.board=new e.Board(this.context),this.snake=new t.Snake(this.context),this.apple=new n.Apple(this.context),this.scores=new r.Scores(this.context)}return a(s,[{key:"refreshScreen",value:function(){this.context.clearRect(0,0,this.context.canvas.width,this.context.canvas.height)}}]),s}();exports.Canvas=i;
},{"../objects/board":"llI7","../objects/snake":"sIOC","../objects/apple":"VcmC","../objects/scores":"jUPX"}],"NlCz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UserInput=exports.directions=void 0;var e=require("./emitter");function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}var i={UP:"UP",DOWN:"DOWN",LEFT:"LEFT",RIGHT:"RIGHT"};exports.directions=i;var o=function(){function n(){var r=this;t(this,n),this.direction=i.UP,document.addEventListener("keydown",function(e){r.detectDirection(e.code)}),e.emitter.on(e.events.LOSE,function(){r.direction=i.UP,document.addEventListener("keypress",r.spaceHandler)}),e.emitter.on(e.events.GAME_OVER,function(){document.removeEventListener("keypress",r.spaceHandler)}),e.emitter.on(e.events.RESTART,function(){document.removeEventListener("keypress",r.spaceHandler)})}return r(n,[{key:"spaceHandler",value:function(t){"Space"===t.code&&e.emitter.emit(e.events.RESTART)}},{key:"setDirection",value:function(){var e=this;return{up:function(){if(e.direction===i.DOWN)return e.direction=i.DOWN;e.direction=i.UP},down:function(){if(e.direction===i.UP)return e.direction=i.UP;e.direction=i.DOWN},left:function(){if(e.direction===i.RIGHT)return e.direction=i.RIGHT;e.direction=i.LEFT},right:function(){if(e.direction===i.LEFT)return e.direction=i.LEFT;e.direction=i.RIGHT}}}},{key:"detectDirection",value:function(e){var t=this.setDirection();switch(e){case"ArrowUp":t.up();break;case"ArrowDown":t.down();break;case"ArrowLeft":t.left();break;case"ArrowRight":t.right()}}}]),n}();exports.UserInput=o;
},{"./emitter":"oGFi"}],"BeQh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getRandomInt=void 0;var t=function(t,e){return Math.round(Math.random()*(e-t)+t)};exports.getRandomInt=t;
},{}],"fS5n":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Updater=void 0;var e=require("../objects"),t=require("./userInput"),o=require("./helpers"),r=require("./emitter");function n(e){return c(e)||a(e)||s(e)||i()}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){if(e){if("string"==typeof e)return l(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?l(e,t):void 0}}function a(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function c(e){if(Array.isArray(e))return l(e)}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=new Array(t);o<t;o++)r[o]=e[o];return r}function u(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,o){return t&&f(e.prototype,t),o&&f(e,o),e}var S=function(){function i(e){h(this,i),this.state=e}return v(i,[{key:"update",value:function(e){var t=e.direction,o=this.calcNextHeadCell(t);return this.moveSnakeToTheNextPosition(o),this.checkCollision(t),this.state}},{key:"calcRandomPosition",value:function(){var t=this.state.getState(e.objects.BOARD),r=t.size,n=t.edgeCell,i=this.state.getState(e.objects.SNAKE).position,s={col:(0,o.getRandomInt)(n,r),row:(0,o.getRandomInt)(n,r)};return i.some(function(e){return e.col===s.col&&e.row===s.row})?this.calcRandomPosition():s}},{key:"setNewApplePosition",value:function(){var t=this.calcRandomPosition();this.state.setState(e.objects.APPLE,{position:t})}},{key:"calcNextHeadCell",value:function(o){var r,n=this.state.getState(e.objects.SNAKE).head,i=this.state.getState(e.objects.BOARD),s=i.size,a=i.edgeCell;return(r={},u(r,t.directions.UP,function(){return n.row<=a?{col:n.col,row:s}:{col:n.col,row:n.row-1}}),u(r,t.directions.DOWN,function(){return n.row>=s?{col:n.col,row:a}:{col:n.col,row:n.row+1}}),u(r,t.directions.RIGHT,function(){return n.col>=s?{row:n.row,col:a}:{row:n.row,col:n.col+1}}),u(r,t.directions.LEFT,function(){return n.col<=a?{row:n.row,col:s}:{row:n.row,col:n.col-1}}),r)[o]()}},{key:"increaseScores",value:function(){var t=this.state.getState(e.objects.SCORES).scores;this.state.setState(e.objects.SCORES,{scores:t+1})}},{key:"appleWasEaten",value:function(){var t=this.state.getState(e.objects.APPLE).position,o=this.state.getState(e.objects.SNAKE).head;return t.col===o.col&&t.row===o.row&&(this.setNewApplePosition(),this.increaseScores(),r.emitter.emit(r.events.SCORE),!0)}},{key:"checkCollision",value:function(t){var o=this.state.getState(e.objects.SNAKE).position,n=this.calcNextHeadCell(t);o.some(function(e,t){return t>0&&(e.col===n.col&&e.row===n.row)})&&(this.decreaseLives(),r.emitter.emit(r.events.LOSE),this.checkTheGameIsOver()&&r.emitter.emit(r.events.GAME_OVER))}},{key:"checkTheGameIsOver",value:function(){return 0===this.state.getState(e.objects.SCORES).lives}},{key:"decreaseLives",value:function(){var t=this.state.getState(e.objects.SCORES).lives;this.state.setState(e.objects.SCORES,{lives:t-1})}},{key:"moveSnakeToTheNextPosition",value:function(t){var o=this.state.getState(e.objects.SNAKE).position,r=[t].concat(n(o));this.state.setState(e.objects.SNAKE,{head:t}),this.state.setState(e.objects.SNAKE,{position:r}),!1===this.appleWasEaten()&&r.pop()}}]),i}();exports.Updater=S;
},{"../objects":"qOtT","./userInput":"NlCz","./helpers":"BeQh","./emitter":"oGFi"}],"Ue1o":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Game=void 0;var e=require("./canvas"),r=require("./emitter"),n=require("./userInput"),t=require("./state"),a=require("./updater"),s=require("../objects");function i(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function u(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function c(e,r,n){return r&&u(e.prototype,r),n&&u(e,n),e}var o=300,v=function(){function u(r){i(this,u),this.canvas=new e.Canvas(r),this.fps=o,this.interval=null,this.updater=new a.Updater(t.state),this.userInput=new n.UserInput}return c(u,[{key:"renderFrame",value:function(e){var r=this;window.requestAnimationFrame(function(){r.canvas.refreshScreen(),r.canvas.board.render(e),r.canvas.snake.render(e),r.canvas.apple.render(e),r.canvas.scores.render(e)})}},{key:"renderScreen",value:function(){var e=this;this.interval&&clearInterval(this.interval),this.interval=setInterval(function(){var r=e.updater.update(e.userInput);e.renderFrame(r)},this.fps)}},{key:"start",value:function(){var e=this;r.emitter.on(r.events.SCORE,function(){e.fps>50&&(e.fps-=10),e.renderScreen()}),r.emitter.on(r.events.LOSE,function(){clearInterval(e.interval)}),r.emitter.on(r.events.RESTART,function(){e.fps=o,t.state.resetState(s.objects.SNAKE),e.renderScreen()}),this.renderScreen()}}]),u}();exports.Game=v;
},{"./canvas":"tK6r","./emitter":"oGFi","./userInput":"NlCz","./state":"A7lJ","./updater":"fS5n","../objects":"qOtT"}],"Focm":[function(require,module,exports) {
"use strict";var e=require("./core/game"),t=document.getElementById("game-canvas"),a=new e.Game(t);window.addEventListener("load",function(){a.start()});
},{"./core/game":"Ue1o"}]},{},["Focm"], null)
//# sourceMappingURL=snake-game.a459e4d8.js.map